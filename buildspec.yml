version: 0.2

env:
  parameter-store:
    TIQ_GIT_TOKEN: "git-token"

  shell: bash

phases:
  pre_build:
    commands:
      - echo "no pre_build commands"

  build:
    commands:
      - pwd
      - ls -l
      - echo "verify dotnet"
      - dotnet --list-sdks
      - echo "dotnet info"
      - dotnet --info
      - git status
      - ./build.sh $BUILD_CONFIG_TYPE $TAG_NAME
      - echo "build ingestion"
      - ./build.sh $BUILD_CONFIG_TYPE $TAG_NAME
      - echo "upload release"
      - ./upload-release.sh $TIQ_GIT_TOKEN
